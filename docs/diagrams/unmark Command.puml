@startuml
'https://plantuml.com/sequence-diagram
hide footbox
actor User
participant ":Astra" as Astra
participant ":Parser" as Parser
participant ":UnmarkCommand" as UnmarkCommand
participant ":ActivityList" as ActivityList
participant "currActivity:Task" as Task
participant ":Ui" as Ui
participant ":Notebook" as Notebook

' Step 1: User input is parsed
User -> Astra : "unmark 3"
activate Astra
Astra -> Parser: parse("unmark 3")
activate Parser

' Parser creates UnmarkCommand
create UnmarkCommand
Parser -> UnmarkCommand
activate UnmarkCommand
UnmarkCommand --> Parser
deactivate UnmarkCommand

' Parser returns command to user
Parser --> Astra : UnmarkCommand
deactivate Parser

' Step 2: User executes the command
Astra -> UnmarkCommand : execute(AL, UI, NB)
activate UnmarkCommand

' Get activity from the list
UnmarkCommand -> ActivityList : getActivity(index - 1)
activate ActivityList
ActivityList --> UnmarkCommand : Activity
deactivate ActivityList

' Check if it is a Task and unmark it
UnmarkCommand -> Task : clearIsComplete()
activate Task
Task --> UnmarkCommand
deactivate Task

' Show confirmation message
UnmarkCommand -> Ui : showMessage("Unmarked: #3 ...")
activate Ui
Ui --> UnmarkCommand
deactivate Ui

' Save to file (optional)

' Return false to User
return false
deactivate UnmarkCommand
destroy UnmarkCommand
Astra -> Notebook : saveToFile()
activate Notebook
Notebook --> Astra
Astra -> Notebook : writeToFile()
return
deactivate Notebook
Astra --> User
deactivate Astra

@enduml